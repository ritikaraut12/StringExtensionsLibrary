trigger:
  - main

# If your lab requires a self-hosted agent, replace the pool below with your self-hosted agent pool name:
pool:
  vmImage: 'windows-latest'
  # or use a Microsoft-hosted pool if allowed:
  # vmImage: 'windows-latest'

steps:
  - task: UseDotNet@2
    inputs:
      packageType: 'sdk'
      version: '8.x'
    displayName: 'Install .NET 8 SDK'

  - script: dotnet restore
    displayName: 'Restore NuGet packages'

  - script: dotnet build --configuration Release
    displayName: 'Build solution'

  - script: dotnet pack --configuration Release --output $(Build.ArtifactStagingDirectory)
    displayName: 'Pack NuGet package'

  - task: NuGetCommand@2
    inputs:
      command: 'push'
      packagesToPush: '$(Build.ArtifactStagingDirectory)/*.nupkg'
      # Replace 'YourFeedID' with the name or ID of your Azure Artifacts feed
      publishVstsFeed: 'YourFeedID'
    displayName: 'Push package to Azure Artifacts'
